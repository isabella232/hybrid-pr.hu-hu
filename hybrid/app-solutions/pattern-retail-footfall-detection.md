---
title: Lépés hangja észlelési minta az Azure és Azure Stack hub használatával
description: Ismerje meg, hogyan használható az Azure és a Azure Stack hub a kiskereskedelmi adatforgalom elemzésére szolgáló AI-alapú lépés hangja-észlelési megoldás megvalósításához.
author: BryanLa
ms.topic: article
ms.date: 10/31/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 10/31/2019
ms.openlocfilehash: 866557ec3af2337e9f034da84cf417675508563b
ms.sourcegitcommit: 962334135b63ac99c715e7bc8fb9282648ba63c9
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 03/23/2021
ms.locfileid: "104895329"
---
# <a name="footfall-detection-pattern"></a><span data-ttu-id="36813-103">Lépés hangja észlelési minta</span><span class="sxs-lookup"><span data-stu-id="36813-103">Footfall detection pattern</span></span>

<span data-ttu-id="36813-104">Ez a minta áttekintést nyújt egy mesterséges intelligencia-alapú lépés hangja-észlelési megoldás megvalósításáról a kiskereskedelmi üzletek látogatói forgalmának elemzéséhez.</span><span class="sxs-lookup"><span data-stu-id="36813-104">This pattern provides an overview for implementing an AI-based footfall detection solution for analyzing visitor traffic in retail stores.</span></span> <span data-ttu-id="36813-105">A megoldás az Azure-ban, Azure Stack hub-on és a Custom Vision AI fejlesztői csomagban bepillantást nyerhet a valós világbeli műveletekkel.</span><span class="sxs-lookup"><span data-stu-id="36813-105">The solution generates insights from real world actions, using Azure, Azure Stack Hub, and the Custom Vision AI Dev Kit.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="36813-106">Kontextus és probléma</span><span class="sxs-lookup"><span data-stu-id="36813-106">Context and problem</span></span>

<span data-ttu-id="36813-107">A contoso-áruházak elemzéseket szeretnének kapni arról, hogy az ügyfelek Hogyan kapják meg aktuális termékeiket az áruház elrendezésével kapcsolatban.</span><span class="sxs-lookup"><span data-stu-id="36813-107">Contoso Stores would like to gain insights on how customers are receiving their current products in relation to store layout.</span></span> <span data-ttu-id="36813-108">Nem helyezhetők el a személyzet minden szakaszba, és nem hatékony, hogy az elemzők egy csoportja áttekintse a teljes áruház kamerás felvételeit.</span><span class="sxs-lookup"><span data-stu-id="36813-108">They're unable to place staff in every section and it's inefficient to have a team of analysts review an entire store's camera footage.</span></span> <span data-ttu-id="36813-109">Emellett a tárolók egyike sem rendelkezik elegendő sávszélességgel, hogy az összes kameráról a felhőbe továbbítsa a videót elemzés céljából.</span><span class="sxs-lookup"><span data-stu-id="36813-109">In addition, none of their stores have enough bandwidth to stream video from all their cameras to the cloud for analysis.</span></span>

<span data-ttu-id="36813-110">A contoso szeretné megkeresni az ügyfelek demográfiai, lojalitási és adatkezelési lehetőségeit a kijelzők és termékek tárolására.</span><span class="sxs-lookup"><span data-stu-id="36813-110">Contoso would like to find an unobtrusive, privacy-friendly way to determine their customers' demographics, loyalty, and reactions to store displays and products.</span></span>

## <a name="solution"></a><span data-ttu-id="36813-111">Megoldás</span><span class="sxs-lookup"><span data-stu-id="36813-111">Solution</span></span>

<span data-ttu-id="36813-112">Ez a kiskereskedelmi elemzési minta egy lépcsőzetes megközelítést használ a szélén való következtetéshez.</span><span class="sxs-lookup"><span data-stu-id="36813-112">This retail analytics pattern uses a tiered approach to inferencing at the edge.</span></span> <span data-ttu-id="36813-113">A Custom Vision AI dev kit használatával csak az emberi arcokkal rendelkező képek lesznek ellátva az Azure Cognitive Services futtató privát Azure Stack hubhoz való elemzésre.</span><span class="sxs-lookup"><span data-stu-id="36813-113">By using the Custom Vision AI Dev Kit, only images with human faces are sent for analysis to a private Azure Stack Hub that runs Azure Cognitive Services.</span></span> <span data-ttu-id="36813-114">Anonim, összesített adatokat küld az Azure-ba az összes áruházban és vizualizációban Power BI.</span><span class="sxs-lookup"><span data-stu-id="36813-114">Anonymized, aggregated data is sent to Azure for aggregation across all stores and visualization in Power BI.</span></span> <span data-ttu-id="36813-115">A peremhálózat és a nyilvános felhő együttes használata lehetővé teszi, hogy a contoso kihasználja a modern AI-technológia előnyeit, miközben a vállalati szabályzatoknak való megfelelés és az ügyfelek magánéletének tiszteletben tartásával is rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="36813-115">Combining the edge and public cloud lets Contoso take advantage of modern AI technology while also remaining in compliance with their corporate policies and respecting their customers' privacy.</span></span>

<span data-ttu-id="36813-116">[![Lépés hangja-észlelési minta megoldás](media/pattern-retail-footfall-detection/solution-architecture.png)](media/pattern-retail-footfall-detection/solution-architecture.png)</span><span class="sxs-lookup"><span data-stu-id="36813-116">[![Footfall detection pattern solution](media/pattern-retail-footfall-detection/solution-architecture.png)](media/pattern-retail-footfall-detection/solution-architecture.png)</span></span>

<span data-ttu-id="36813-117">Íme egy összefoglaló a megoldás működéséről:</span><span class="sxs-lookup"><span data-stu-id="36813-117">Here's a summary of how the solution works:</span></span>

1. <span data-ttu-id="36813-118">A Custom Vision AI dev Kit IoT Hubtól származó konfigurációt kap, amely telepíti a IoT Edge futtatókörnyezetet és egy ML modellt.</span><span class="sxs-lookup"><span data-stu-id="36813-118">The Custom Vision AI Dev Kit gets a configuration from IoT Hub, which installs the IoT Edge Runtime and an ML model.</span></span>
2. <span data-ttu-id="36813-119">Ha a modell egy személyt lát, egy képet helyez el, és feltölti Azure Stack hub blob Storage-ba.</span><span class="sxs-lookup"><span data-stu-id="36813-119">If the model sees a person, it takes a picture and uploads it to Azure Stack Hub blob storage.</span></span>
3. <span data-ttu-id="36813-120">A blob szolgáltatás elindít egy Azure-függvényt Azure Stack hub-on.</span><span class="sxs-lookup"><span data-stu-id="36813-120">The blob service triggers an Azure Function on Azure Stack Hub.</span></span>
4. <span data-ttu-id="36813-121">Az Azure-függvény egy tárolót hív meg a Face API, hogy demográfiai és érzelem-adatokhoz kapjon képet.</span><span class="sxs-lookup"><span data-stu-id="36813-121">The Azure Function calls a container with the Face API to get demographic and emotion data from the image.</span></span>
5. <span data-ttu-id="36813-122">Az adatküldés egy Azure Event Hubs-fürtbe történik.</span><span class="sxs-lookup"><span data-stu-id="36813-122">The data is anonymized and sent to an Azure Event Hubs cluster.</span></span>
6. <span data-ttu-id="36813-123">A Event Hubs-fürt leküldi az adatStream Analyticsba.</span><span class="sxs-lookup"><span data-stu-id="36813-123">The Event Hubs cluster pushes the data to Stream Analytics.</span></span>
7. <span data-ttu-id="36813-124">Stream Analytics összesíti az adatokat, és leküldi Power BIre.</span><span class="sxs-lookup"><span data-stu-id="36813-124">Stream Analytics aggregates the data and pushes it to Power BI.</span></span>

## <a name="components"></a><span data-ttu-id="36813-125">Összetevők</span><span class="sxs-lookup"><span data-stu-id="36813-125">Components</span></span>

<span data-ttu-id="36813-126">Ez a megoldás a következő összetevőket használja:</span><span class="sxs-lookup"><span data-stu-id="36813-126">This solution uses the following components:</span></span>

| <span data-ttu-id="36813-127">Réteg</span><span class="sxs-lookup"><span data-stu-id="36813-127">Layer</span></span> | <span data-ttu-id="36813-128">Összetevő</span><span class="sxs-lookup"><span data-stu-id="36813-128">Component</span></span> | <span data-ttu-id="36813-129">Leírás</span><span class="sxs-lookup"><span data-stu-id="36813-129">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="36813-130">Tárolt hardver</span><span class="sxs-lookup"><span data-stu-id="36813-130">In-store hardware</span></span> | [<span data-ttu-id="36813-131">Custom Vision AI fejlesztői csomag</span><span class="sxs-lookup"><span data-stu-id="36813-131">Custom Vision AI Dev Kit</span></span>](https://azure.github.io/Vision-AI-DevKit-Pages/) | <span data-ttu-id="36813-132">Egy helyi ML-modell használatával biztosítja az áruházbeli szűrést, amely csak az elemzésre alkalmas személyek képét rögzíti.</span><span class="sxs-lookup"><span data-stu-id="36813-132">Provides in-store filtering using a local ML model that only captures images of people for analysis.</span></span> <span data-ttu-id="36813-133">Biztonságos kiépítés és frissítés IoT Hubon keresztül.</span><span class="sxs-lookup"><span data-stu-id="36813-133">Securely provisioned and updated through IoT Hub.</span></span><br><br>|
| <span data-ttu-id="36813-134">Azure</span><span class="sxs-lookup"><span data-stu-id="36813-134">Azure</span></span> | [<span data-ttu-id="36813-135">Azure Event Hubs</span><span class="sxs-lookup"><span data-stu-id="36813-135">Azure Event Hubs</span></span>](/azure/event-hubs/) | <span data-ttu-id="36813-136">Az Azure Event Hubs méretezhető platformot biztosít a Azure Stream Analyticshoz szépen integrálható, névtelenül tárolt adatmennyiségek betöltéséhez.</span><span class="sxs-lookup"><span data-stu-id="36813-136">Azure Event Hubs provides a scalable platform for ingesting anonymized data that integrates neatly with Azure Stream Analytics.</span></span> |
|  | [<span data-ttu-id="36813-137">Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="36813-137">Azure Stream Analytics</span></span>](/azure/stream-analytics/) | <span data-ttu-id="36813-138">Az Azure Stream Analytics-feladatok összesítik a névtelen adatokat, és a vizualizációk 15 másodperces Windowsba csoportosítják azokat.</span><span class="sxs-lookup"><span data-stu-id="36813-138">An Azure Stream Analytics job aggregates the anonymized data and groups it into 15-second windows for visualization.</span></span> |
|  | [<span data-ttu-id="36813-139">Microsoft Power BI</span><span class="sxs-lookup"><span data-stu-id="36813-139">Microsoft Power BI</span></span>](https://powerbi.microsoft.com/) | <span data-ttu-id="36813-140">A Power BI egy könnyen használható irányítópult-felületet biztosít a Azure Stream Analytics kimenetének megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="36813-140">Power BI provides an easy-to-use dashboard interface for viewing the output from Azure Stream Analytics.</span></span> |
| <span data-ttu-id="36813-141">Azure Stack Hub</span><span class="sxs-lookup"><span data-stu-id="36813-141">Azure Stack Hub</span></span> | [<span data-ttu-id="36813-142">APP SERVICE</span><span class="sxs-lookup"><span data-stu-id="36813-142">App Service</span></span>](/azure-stack/operator/azure-stack-app-service-overview) | <span data-ttu-id="36813-143">A App Service erőforrás-szolgáltató (RP) egy alapot biztosít a peremhálózati összetevők számára, beleértve a Web Apps/API-k és függvények üzemeltetési és felügyeleti funkcióit.</span><span class="sxs-lookup"><span data-stu-id="36813-143">The App Service resource provider (RP) provides a base for edge components, including hosting and management features for web apps/APIs and Functions.</span></span> |
| | <span data-ttu-id="36813-144">Azure Kubernetes szolgáltatás [(ak) motorjának](https://github.com/Azure/aks-engine) fürtje</span><span class="sxs-lookup"><span data-stu-id="36813-144">Azure Kubernetes Service [(AKS) Engine](https://github.com/Azure/aks-engine) cluster</span></span> | <span data-ttu-id="36813-145">A Azure Stack hub-ba telepített AKS-Engine-fürttel rendelkező AK RP méretezhető, rugalmas motort biztosít az Face API tároló futtatásához.</span><span class="sxs-lookup"><span data-stu-id="36813-145">The AKS RP with AKS-Engine cluster deployed into Azure Stack Hub provides a scalable, resilient engine to run the Face API container.</span></span> |
| | <span data-ttu-id="36813-146">Azure Cognitive Services [Face API tárolók](/azure/cognitive-services/face/face-how-to-install-containers)</span><span class="sxs-lookup"><span data-stu-id="36813-146">Azure Cognitive Services [Face API containers](/azure/cognitive-services/face/face-how-to-install-containers)</span></span>| <span data-ttu-id="36813-147">Az Azure Cognitive Services RP Face API tárolókkal biztosítja a demográfiai, érzelem-és egyedi látogatói észlelést a contoso magánhálózaton.</span><span class="sxs-lookup"><span data-stu-id="36813-147">The Azure Cognitive Services RP with Face API containers provides demographic, emotion, and unique visitor detection on Contoso's private network.</span></span> |
| | <span data-ttu-id="36813-148">Blob Storage</span><span class="sxs-lookup"><span data-stu-id="36813-148">Blob Storage</span></span> | <span data-ttu-id="36813-149">Az AI fejlesztői csomagból rögzített rendszerképek fel lesznek töltve az Azure Stack hub blob Storage-tárolóba.</span><span class="sxs-lookup"><span data-stu-id="36813-149">Images captured from the AI Dev Kit are uploaded to Azure Stack Hub's blob storage.</span></span> |
| | <span data-ttu-id="36813-150">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="36813-150">Azure Functions</span></span> | <span data-ttu-id="36813-151">Azure Stack hub-on futó Azure-függvény fogadja a blob Storage-ból érkező adatokat, és kezeli az interakciókat a Face API.</span><span class="sxs-lookup"><span data-stu-id="36813-151">An Azure Function running on Azure Stack Hub receives input from blob storage and manages the interactions with the Face API.</span></span> <span data-ttu-id="36813-152">A rendszer az Azure-ban található Event Hubs-fürtre küldi el a névtelenül való adatgyűjtést.</span><span class="sxs-lookup"><span data-stu-id="36813-152">It emits anonymized data to an Event Hubs cluster located in Azure.</span></span><br><br>|

## <a name="issues-and-considerations"></a><span data-ttu-id="36813-153">Problémák és megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="36813-153">Issues and considerations</span></span>

<span data-ttu-id="36813-154">A megoldás megvalósításának eldöntése során vegye figyelembe a következő szempontokat:</span><span class="sxs-lookup"><span data-stu-id="36813-154">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="36813-155">Méretezhetőség</span><span class="sxs-lookup"><span data-stu-id="36813-155">Scalability</span></span>

<span data-ttu-id="36813-156">Ha engedélyezni szeretné, hogy a megoldás több kamera és hely között is méretezhető legyen, meg kell győződnie arról, hogy az összes összetevő képes kezelni a megnövekedett terhelést.</span><span class="sxs-lookup"><span data-stu-id="36813-156">To enable this solution to scale across multiple cameras and locations, you'll need to make sure that all of the components can handle the increased load.</span></span> <span data-ttu-id="36813-157">Előfordulhat, hogy olyan műveleteket kell végrehajtania, mint például:</span><span class="sxs-lookup"><span data-stu-id="36813-157">You may need to take actions like:</span></span>

- <span data-ttu-id="36813-158">Növelje Stream Analytics folyamatos átviteli egységek számát.</span><span class="sxs-lookup"><span data-stu-id="36813-158">Increase the number of Stream Analytics streaming units.</span></span>
- <span data-ttu-id="36813-159">A Face API üzembe helyezésének felskálázása.</span><span class="sxs-lookup"><span data-stu-id="36813-159">Scale out the Face API deployment.</span></span>
- <span data-ttu-id="36813-160">Növelje a Event Hubs-fürt átviteli sebességét.</span><span class="sxs-lookup"><span data-stu-id="36813-160">Increase the Event Hubs cluster throughput.</span></span>
- <span data-ttu-id="36813-161">Szélsőséges esetekben szükség lehet a Azure Functionsról a virtuális gépre való Migrálás.</span><span class="sxs-lookup"><span data-stu-id="36813-161">For extreme cases, migrate from Azure Functions to a virtual machine may be necessary.</span></span>

### <a name="availability"></a><span data-ttu-id="36813-162">Rendelkezésre állás</span><span class="sxs-lookup"><span data-stu-id="36813-162">Availability</span></span>

<span data-ttu-id="36813-163">Mivel ez a megoldás többrétegű, fontos, hogy meggondolja, hogyan kell kezelni a hálózati vagy áramkimaradásokat.</span><span class="sxs-lookup"><span data-stu-id="36813-163">Since this solution is tiered, it's important to think about how to deal with networking or power failures.</span></span> <span data-ttu-id="36813-164">Az üzleti igényektől függően érdemes lehet megvalósítani egy olyan mechanizmust, amely helyileg gyorsítótárazza a lemezképeket, majd a kapcsolat visszaadásakor továbbítja Azure Stack hubhoz.</span><span class="sxs-lookup"><span data-stu-id="36813-164">Depending on business needs, you might want to implement a mechanism to cache images locally, then forward to Azure Stack Hub when connectivity returns.</span></span> <span data-ttu-id="36813-165">Ha a hely elég nagy, akkor lehet, hogy egy Data Box Edge üzembe helyezése a Face API tárolóval az adott helyen jobb megoldás lehet.</span><span class="sxs-lookup"><span data-stu-id="36813-165">If the location is large enough, deploying a Data Box Edge with the Face API container to that location might be a better option.</span></span>

### <a name="manageability"></a><span data-ttu-id="36813-166">Kezelhetőség</span><span class="sxs-lookup"><span data-stu-id="36813-166">Manageability</span></span>

<span data-ttu-id="36813-167">Ez a megoldás számos eszközre és helyszínre képes, így nem lehet megszerezni a megoldást.</span><span class="sxs-lookup"><span data-stu-id="36813-167">This solution can span many devices and locations, which could get unwieldy.</span></span> <span data-ttu-id="36813-168">Az [Azure IoT-szolgáltatásaival](/azure/iot-fundamentals/) automatikusan online állapotba helyezhetők az új telephelyek és eszközök, és naprakészen tarthatók.</span><span class="sxs-lookup"><span data-stu-id="36813-168">[Azure's IoT services](/azure/iot-fundamentals/) can be used to automatically bring new locations and devices online and keep them up to date.</span></span>

### <a name="security"></a><span data-ttu-id="36813-169">Biztonság</span><span class="sxs-lookup"><span data-stu-id="36813-169">Security</span></span>

<span data-ttu-id="36813-170">Ez a megoldás rögzíti a vásárlói rendszerképeket, így a biztonság a legfontosabb szempont.</span><span class="sxs-lookup"><span data-stu-id="36813-170">This solution captures customer images, making security a paramount consideration.</span></span> <span data-ttu-id="36813-171">Győződjön meg arról, hogy az összes Storage-fiók biztonságos a megfelelő hozzáférési házirendekkel, és hogy rendszeresen forgatni kívánja a kulcsokat.</span><span class="sxs-lookup"><span data-stu-id="36813-171">Make sure all storage accounts are secured with the proper access policies and rotate keys regularly.</span></span> <span data-ttu-id="36813-172">Győződjön meg arról, hogy a Storage-fiókok és a Event Hubs rendelkeznek a vállalati és kormányzati adatvédelmi szabályozásoknak megfelelő adatmegőrzési szabályzatokkal</span><span class="sxs-lookup"><span data-stu-id="36813-172">Ensure storage accounts and Event Hubs have retention policies that meet corporate and government privacy regulations.</span></span> <span data-ttu-id="36813-173">Győződjön meg arról is, hogy a felhasználói hozzáférési szintek rétegben vannak.</span><span class="sxs-lookup"><span data-stu-id="36813-173">Also make sure to tier the user access levels.</span></span> <span data-ttu-id="36813-174">A rétegek biztosítása biztosítja, hogy a felhasználók csak a szerepkörük számára szükséges adathoz férhessenek hozzá.</span><span class="sxs-lookup"><span data-stu-id="36813-174">Tiering ensures that users only have access to the data they need for their role.</span></span>

## <a name="next-steps"></a><span data-ttu-id="36813-175">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="36813-175">Next steps</span></span>

<span data-ttu-id="36813-176">További információ a cikkben bemutatott témakörökről:</span><span class="sxs-lookup"><span data-stu-id="36813-176">To learn more about the topics introduced in this article:</span></span>

- <span data-ttu-id="36813-177">Tekintse meg a lépés hangja-észlelési minta által kihasználható, [többszintes adatmintát](https://aka.ms/tiereddatadeploy).</span><span class="sxs-lookup"><span data-stu-id="36813-177">See the [Tiered Data pattern](https://aka.ms/tiereddatadeploy), which is leveraged by the footfall detection pattern.</span></span>
- <span data-ttu-id="36813-178">További információ az egyéni jövőkép használatáról: [Custom Vision AI fejlesztői csomag](https://azure.github.io/Vision-AI-DevKit-Pages/) .</span><span class="sxs-lookup"><span data-stu-id="36813-178">See the [Custom Vision AI Dev Kit](https://azure.github.io/Vision-AI-DevKit-Pages/) to learn more about using custom vision.</span></span> 

<span data-ttu-id="36813-179">Ha készen áll a megoldás tesztelésére, folytassa a lépés hangja- [észlelés telepítési útmutatóját](solution-deployment-guide-retail-footfall-detection.md).</span><span class="sxs-lookup"><span data-stu-id="36813-179">When you're ready to test the solution example, continue with the [Footfall detection deployment guide](solution-deployment-guide-retail-footfall-detection.md).</span></span> <span data-ttu-id="36813-180">A telepítési útmutató részletes útmutatást nyújt az összetevők üzembe helyezéséhez és teszteléséhez.</span><span class="sxs-lookup"><span data-stu-id="36813-180">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
